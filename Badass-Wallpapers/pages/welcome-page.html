<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome to BADASS</title>
    <!-- Favicon (Head Title Image) -->
    <link rel="icon" href="../Favcon.jpg" type="image/png" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BSM5V312FG"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-BSM5V312FG');
    </script>
    <!-- Vercel Analytics -->
    <script>
      window.va =
        window.va ||
        function () {
          (window.vaq = window.vaq || []).push(arguments);
        };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    <!-- End Vercel Analytics -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      /* Base Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        height: 100vh;
        background: url("../assets/background2.jpg") no-repeat center
          center/cover;
        font-family: "Arial", sans-serif;
        overflow: hidden;
        position: relative;
      }
      /* Particle Overlay */
      #particles-js {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 1;
      }
      /* Content Container */
      .welcome-container {
        position: relative;
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: white;
        text-align: center;
        padding: 20px;
      }

      .welcome-container > button {
        padding: 15px 30px;
        background: #facc15;
        color: #1a202c;
        border: none;
        border-radius: 25px;
        font-size: 1.2rem;
        cursor: pointer;
        transition: transform 0.3s ease;
      }
      /* Back Button */
      .back-button {
        position: absolute;
        top: 20px;
        left: 20px;
        z-index: 1000; /* Ensure button is on top */
        display: flex;
        align-items: center;
        text-decoration: none;
        color: white;
        font-weight: 600;
        transition: opacity 0.3s;
      }
      .back-button:hover {
        opacity: 0.7;
      }
      .back-button svg {
        width: 30px;
        height: 30px;
        fill: white;
        margin-right: 8px;
      }
      /* Typewriter Effect */
      .welcome-text {
        color: #facc15;
        font-size: 2.5rem;
        margin: 0 0 1rem 0;
        white-space: nowrap;
        overflow: hidden;
        border-right: 0.15em solid #facc15;
        width: 0;
        animation: typing 3s steps(40, end) forwards,
          blink-caret 0.75s step-end infinite;
      }
      /* Music Player */
      .music-player {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.7);
        padding: 1rem;
        border-radius: 15px;
        display: flex;
        gap: 1rem;
        align-items: center;
        z-index: 3;
        backdrop-filter: blur(5px);
      }
      #playBtn {
        background: #facc15;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }
      #playBtn:hover {
        transform: scale(1.1);
        box-shadow: 0 0 15px #facc15;
      }
      /* Set proper range for volume (0 to 1) */
      #volume {
        width: 100px;
        accent-color: #facc15;
      }
      .submit-btn {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 30px;
        background: #facc15;
        color: black;
        font-size: 16px;
        cursor: pointer;
        transition: background 0.3s ease;
      }
      /* Animations */
      @keyframes typing {
        from {
          width: 0;
        }
        to {
          width: 100%;
        }
      }
      @keyframes blink-caret {
        from,
        to {
          border-color: transparent;
        }
        50% {
          border-color: #facc15;
        }
      }
      @media (max-width: 768px) {
        .welcome-text {
          font-size: 1.8rem;
        }
        .back-button span {
          display: none;
        }
      }

      @media (max-width: 633px) {
        .welcome-text {
          font-size: 25px;
        }
      }

      @media (max-width: 556px) {
        .welcome-text {
          font-size: 20px;
        }
      }

      @media (max-width: 456px) {
        .welcome-text {
          font-size: 17px;
        }
        .welcome-container > button {
          padding: 10px 25px;
          font-size: 15.2px;
        }
        #playBtn{
          width: 30px;
          height: 30px;
        }
        #volume {
          width: 80px;
        }
      }
      @media (max-width: 406px) {
        .welcome-text {
          font-size: 13px;
        }
        #playBtn{
          width: 27px;
          height: 27px;
        }
        #volume {
          width: 60px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Particle Background -->
    <div id="particles-js"></div>

    <!-- Back Button -->
    <a href="../login.html" class="back-button">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M15.5 19l-1.42 1.42L6.08 12l7.92-8.42L15.5 5l-6 7z" />
      </svg>
      <span>Back</span>
    </a>

    <!-- Welcome Content -->
    <div class="welcome-container">
      <h1 class="welcome-text" id="welcomeMessage"></h1>
      <button
        onclick="location.href='homepage.html'"
      >
        Explore Wallpapers
      </button>
    </div>

    <!-- Music Player -->
    <div class="music-player">
      <button id="playBtn">⏸</button>
      <input type="range" id="volume" min="0" max="1" step="0.1" value="0.5" />
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
      /* ================================
       Particles.js (Embedded Version)
       ================================= */
      // !function(t){"use strict";function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),n}function i(){return function t(e,n){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(this,function(t){if("undefined"==typeof window)return{};var e=window.pJSDom=[],n=window;t&&(n=t);var i=function(){function t(t){this.canvas=null,this.ctx=null,this.pJS={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),n.document.body.appendChild(this.canvas),this.pJS={canvas:this.canvas,ctx:this.ctx}}return n(t,[{key:"init",value:function(){this.pJS.fn={}}}]),t}();return e.push(new i),{}}var r=i();t.particlesJS=function(e,n){return r.init(e,n),r},t.particlesJS.dom=r}(window);

      // Initialize Particles
      particlesJS("particles-js", {
        particles: {
          number: { value: 100 },
          color: { value: "#facc15" },
          shape: { type: "circle" },
          opacity: { value: 0.5 },
          size: { value: 3 },
          move: { enable: true, speed: 2 },
        },
        interactivity: {
          events: {
            onhover: { enable: true, mode: "repulse" },
          },
        },
      });

      /* ================================
       Music Player Logic with Persistence
       ================================= */
      // Create audio element with the fallback music file
      const audio = new Audio("../assets/fallback-music.mp3");
      let isPlaying = true;

      // Restore saved music state from localStorage (if available)
      const savedState = localStorage.getItem("musicState");
      if (savedState) {
        const state = JSON.parse(savedState);
        audio.volume = state.volume || 0.5;
        audio.currentTime = state.currentTime || 0;
        if (state.isPlaying) {
          audio.play().catch((err) => console.error("Autoplay blocked:", err));
          isPlaying = true;
        } else {
          isPlaying = false;
        }
      } else {
        audio.volume = 0.5;
        audio.play().catch((err) => console.error("Autoplay blocked:", err));
      }

      // Save music state on time updates
      audio.addEventListener("timeupdate", () => {
        localStorage.setItem(
          "musicState",
          JSON.stringify({
            isPlaying: isPlaying,
            currentTime: audio.currentTime,
            volume: audio.volume,
          })
        );
      });

      // Play/Pause button event
      document.getElementById("playBtn").addEventListener("click", () => {
        if (isPlaying) {
          audio.pause();
          document.getElementById("playBtn").textContent = "▶";
        } else {
          audio.play().catch((err) => console.error("Play error:", err));
          document.getElementById("playBtn").textContent = "⏸";
        }
        isPlaying = !isPlaying;
        localStorage.setItem(
          "musicState",
          JSON.stringify({
            isPlaying: isPlaying,
            currentTime: audio.currentTime,
            volume: audio.volume,
          })
        );
      });

      // Volume control event
      document.getElementById("volume").addEventListener("input", (e) => {
        audio.volume = e.target.value;
        localStorage.setItem(
          "musicState",
          JSON.stringify({
            isPlaying: isPlaying,
            currentTime: audio.currentTime,
            volume: audio.volume,
          })
        );
      });

      // Save music state before leaving the page
      window.addEventListener("beforeunload", () => {
        localStorage.setItem(
          "musicState",
          JSON.stringify({
            isPlaying: isPlaying,
            currentTime: audio.currentTime,
            volume: audio.volume,
          })
        );
      });

      /* ================================
       Personalized Welcome Message
       ================================= */
      const userData = JSON.parse(localStorage.getItem("user"));
      const userName = userData?.name || "Baddass";
      document.getElementById(
        "welcomeMessage"
      ).textContent = `Welcome to the BADASS Universe, ${userName}!`;
    </script>
  </body>
</html>
